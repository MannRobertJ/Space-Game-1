{"ast":null,"code":"import _classCallCheck from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/src/components/Ship.js\";\nimport React, { PureComponent } from \"react\";\nimport { Circle } from \"react-konva\";\nimport { WIDTH, HEIGHT } from \"./Field\";\nimport KeyHandler from \"react-key-handler\";\nvar MIN_X = 12,\n    MIN_Y = 12,\n    MAX_X = WIDTH - MIN_X,\n    MAX_Y = HEIGHT - MIN_Y;\n\nvar Ship =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Ship, _PureComponent);\n\n  function Ship() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Ship);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Ship)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      color: _this.props.color,\n      x: Math.random() * (MAX_X - MIN_X) + MIN_X,\n      y: Math.random() * (MAX_Y - MIN_Y) + MIN_Y,\n      direction: {\n        x: 0,\n        y: 0\n      }\n    };\n\n    _this.newCoord = function (val, delta, max, min) {\n      var newVal = val + delta;\n      var newDelta = delta;\n\n      if (newVal > max) {\n        newVal = min + newVal - max;\n      }\n\n      if (newVal < min) {\n        newVal = max - newVal;\n      }\n\n      return {\n        val: newVal,\n        delta: newDelta\n      };\n    };\n\n    _this.animate = function () {\n      var _this$state = _this.state,\n          x = _this$state.x,\n          y = _this$state.y,\n          horizontal = _this.props.velocity ? _this.props.velocity.x : 0,\n          vertical = _this.props.velocity ? _this.props.velocity.y : 0;\n\n      if (horizontal !== 0 || vertical !== 0) {\n        var newX = _this.newCoord(x, horizontal, MAX_X, MIN_X);\n\n        var newY = _this.newCoord(y, vertical, MAX_Y, MIN_Y);\n\n        _this.setState({\n          x: newX.val,\n          y: newY.val,\n          direction: {\n            x: newX.delta,\n            y: newY.delta\n          }\n        });\n      }\n\n      _this.animationTimeout = setTimeout(_this.animate, 1000 / 60);\n    };\n\n    return _this;\n  }\n\n  _createClass(Ship, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$velocity = this.props.velocity,\n          x = _this$props$velocity.x,\n          y = _this$props$velocity.y;\n      this.setState({\n        direction: {\n          x: x,\n          y: y\n        }\n      });\n      this.animate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          color = _this$state2.color,\n          x = _this$state2.x,\n          y = _this$state2.y;\n      return React.createElement(Circle, {\n        ref: function ref(comp) {\n          _this2.ball = comp;\n        },\n        x: x,\n        y: y,\n        radius: 10,\n        fill: color,\n        shadowBlur: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(KeyHandler, {\n        keyEventName: \"keyup\",\n        key: \"t\",\n        keyValue: \"t\",\n        onKeyHandle: function onKeyHandle() {\n          _this2.props.shootBullet(_this2.props.player, {\n            x: _this2.state.x,\n            y: _this2.state.y\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.animationTimeout);\n    }\n  }]);\n\n  return Ship;\n}(PureComponent);\n\nexport { Ship as default };","map":{"version":3,"sources":["/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/src/components/Ship.js"],"names":["React","PureComponent","Circle","WIDTH","HEIGHT","KeyHandler","MIN_X","MIN_Y","MAX_X","MAX_Y","Ship","state","color","props","x","Math","random","y","direction","newCoord","val","delta","max","min","newVal","newDelta","animate","horizontal","velocity","vertical","newX","newY","setState","animationTimeout","setTimeout","comp","ball","shootBullet","player","clearTimeout"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\nimport { Circle } from \"react-konva\";\nimport { WIDTH, HEIGHT } from \"./Field\";\n\nimport KeyHandler from \"react-key-handler\";\n\nconst MIN_X = 12,\n  MIN_Y = 12,\n  MAX_X = WIDTH - MIN_X,\n  MAX_Y = HEIGHT - MIN_Y;\n\nexport default class Ship extends PureComponent {\n  state = {\n    color: this.props.color,\n    x: Math.random() * (MAX_X - MIN_X) + MIN_X,\n    y: Math.random() * (MAX_Y - MIN_Y) + MIN_Y,\n    direction: { x: 0, y: 0 }\n  };\n\n  componentDidMount() {\n    const { x, y } = this.props.velocity;\n    this.setState({ direction: { x, y } });\n    this.animate();\n  }\n\n  newCoord = (val, delta, max, min) => {\n    let newVal = val + delta;\n    let newDelta = delta;\n\n    if (newVal > max) {\n      newVal = min + newVal - max;\n    }\n\n    if (newVal < min) {\n      newVal = max - newVal;\n    }\n\n    return { val: newVal, delta: newDelta };\n  };\n\n  animate = () => {\n    const { x, y } = this.state,\n      horizontal = this.props.velocity ? this.props.velocity.x : 0,\n      vertical = this.props.velocity ? this.props.velocity.y : 0;\n\n    if (horizontal !== 0 || vertical !== 0) {\n      const newX = this.newCoord(x, horizontal, MAX_X, MIN_X);\n      const newY = this.newCoord(y, vertical, MAX_Y, MIN_Y);\n\n      this.setState({\n        x: newX.val,\n        y: newY.val,\n        direction: {\n          x: newX.delta,\n          y: newY.delta\n        }\n      });\n    }\n\n    this.animationTimeout = setTimeout(this.animate, 1000 / 60);\n  };\n\n  render() {\n    const { color, x, y } = this.state;\n\n    return (\n      <Circle\n        ref={comp => {\n          this.ball = comp;\n        }}\n        x={x}\n        y={y}\n        radius={10}\n        fill={color}\n        shadowBlur={1}\n      >\n        <KeyHandler\n          keyEventName=\"keyup\"\n          key={\"t\"}\n          keyValue={\"t\"}\n          onKeyHandle={() => {\n            this.props.shootBullet(this.props.player, {\n              x: this.state.x,\n              y: this.state.y\n            });\n          }}\n        />\n      </Circle>\n    );\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.animationTimeout);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
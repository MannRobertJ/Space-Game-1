{"ast":null,"code":"import _toConsumableArray from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/src/components/Game.js\";\nimport React, { Component } from \"react\";\nimport { Layer } from \"react-konva\";\nimport Field from \"./Field\";\nimport Ball from \"./Ball\";\nimport Konva from \"konva\";\nimport KeyHandler from \"react-key-handler\";\nimport io from \"socket.io-client\";\n\nvar Game =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Game, _Component);\n\n  function Game(props) {\n    var _this;\n\n    _classCallCheck(this, Game);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Game).call(this, props));\n    _this.keys = [\"w\", \"a\", \"s\", \"d\", \"t\"];\n\n    _this.shootBullet = function (playerId) {\n      return {\n        playerId: playerId,\n        id: Math.random()\n      };\n    };\n\n    _this.componentDidUpdate = function (prevProps, prevState) {\n      if (_this.state.bullets !== prevState.bullets) {\n        var bullets = _this.state.bullets;\n        var bullet = bullets[bullets.length - 1];\n      }\n    };\n\n    _this.handleKeyDown = function (event) {\n      switch (event.key) {\n        case \"w\":\n          _this.setState({\n            horizontal: -10\n          });\n\n          break;\n\n        case \"s\":\n          _this.setState({\n            horizontal: 10\n          });\n\n          break;\n\n        case \"a\":\n          _this.setState({\n            vertical: -10\n          });\n\n          break;\n\n        case \"d\":\n          _this.setState({\n            vertical: 10\n          });\n\n          break;\n\n        case \"t\":\n          var newBullet = _this.shootBullet(_this.state.players[0]);\n\n          _this.setState({\n            bullets: [].concat(_toConsumableArray(_this.state.bullets), [newBullet])\n          });\n\n          var newBulletArray = _this.state.bullets.filter(function (bullet) {\n            return bullet.id !== newBullet.id;\n          });\n\n          setTimeout(function () {\n            return _this.setState({\n              bullets: newBulletArray\n            });\n          }, 1000);\n          break;\n\n        default:\n          console.log(\"down: \" + event.key);\n      }\n    };\n\n    _this.handleKeyUp = function (event) {\n      switch (event.key) {\n        case \"w\":\n          _this.setState({\n            horizontal: 0\n          });\n\n          break;\n\n        case \"s\":\n          _this.setState({\n            horizontal: 0\n          });\n\n          break;\n\n        case \"a\":\n          _this.setState({\n            vertical: 0\n          });\n\n          break;\n\n        case \"d\":\n          _this.setState({\n            vertical: 0\n          });\n\n          break;\n\n        default:\n          console.log(\"up: \" + event.key);\n      }\n    };\n\n    _this.state = {\n      color: Konva.Util.getRandomColor(),\n      vertical: 0,\n      horizontal: 0,\n      players: [],\n      bullets: []\n    };\n    _this.socket = io(\"localhost:4000\");\n\n    _this.socket.emit(\"new player\");\n\n    setInterval(function () {\n      _this.socket.emit(\"movement\", _this.state);\n    }, 1000 / 60);\n\n    _this.socket.on(\"state\", function (players) {\n      _this.setState({\n        players: players\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Game, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Layer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), Object.keys(this.state.players).map(function (player) {\n        //console.log(this.state.players[player].x);\n        //console.log(this.state.players[player].y);\n        return React.createElement(Ball, {\n          key: player,\n          color: _this2.state.color,\n          vertical: _this2.state.players[player].x,\n          horizontal: _this2.state.players[player].y,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        });\n      }), this.state.bullets.map(function (bullet) {\n        return React.createElement(Ball, {\n          key: Math.random(),\n          color: _this2.state.color,\n          vertical: 1,\n          horizontal: 1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        });\n      }), this.keys.map(function (key) {\n        return React.createElement(KeyHandler, {\n          keyEventName: \"keydown\",\n          key: key,\n          keyValue: key,\n          onKeyHandle: _this2.handleKeyDown,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        });\n      }), this.keys.map(function (key) {\n        return React.createElement(KeyHandler, {\n          keyEventName: \"keyup\",\n          key: key,\n          keyValue: key,\n          onKeyHandle: _this2.handleKeyUp,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return Game;\n}(Component);\n\nexport { Game as default };","map":{"version":3,"sources":["/home/robert/Desktop/codaisseur/week-7/Space-Game/client/game/src/components/Game.js"],"names":["React","Component","Layer","Field","Ball","Konva","KeyHandler","io","Game","props","keys","shootBullet","playerId","id","Math","random","componentDidUpdate","prevProps","prevState","state","bullets","bullet","length","handleKeyDown","event","key","setState","horizontal","vertical","newBullet","players","newBulletArray","filter","setTimeout","console","log","handleKeyUp","color","Util","getRandomColor","socket","emit","setInterval","on","Object","map","player","x","y"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Layer } from \"react-konva\";\nimport Field from \"./Field\";\nimport Ball from \"./Ball\";\nimport Konva from \"konva\";\nimport KeyHandler from \"react-key-handler\";\nimport io from \"socket.io-client\";\n\nexport default class Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      color: Konva.Util.getRandomColor(),\n      vertical: 0,\n      horizontal: 0,\n      players: [],\n      bullets: []\n    };\n\n    this.socket = io(\"localhost:4000\");\n\n    this.socket.emit(\"new player\");\n    setInterval(() => {\n      this.socket.emit(\"movement\", this.state);\n    }, 1000 / 60);\n\n    this.socket.on(\"state\", players => {\n      this.setState({ players });\n    });\n  }\n\n  keys = [\"w\", \"a\", \"s\", \"d\", \"t\"];\n\n  shootBullet = playerId => {\n    return { playerId, id: Math.random() };\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (this.state.bullets !== prevState.bullets) {\n      const bullets = this.state.bullets;\n      const bullet = bullets[bullets.length - 1];\n    }\n  };\n\n  handleKeyDown = event => {\n    switch (event.key) {\n      case \"w\":\n        this.setState({ horizontal: -10 });\n        break;\n      case \"s\":\n        this.setState({ horizontal: 10 });\n        break;\n      case \"a\":\n        this.setState({ vertical: -10 });\n        break;\n      case \"d\":\n        this.setState({ vertical: 10 });\n        break;\n      case \"t\":\n        const newBullet = this.shootBullet(this.state.players[0]);\n        this.setState({ bullets: [...this.state.bullets, newBullet] });\n\n        const newBulletArray = this.state.bullets.filter(\n          bullet => bullet.id !== newBullet.id\n        );\n\n        setTimeout(() => this.setState({ bullets: newBulletArray }), 1000);\n\n        break;\n      default:\n        console.log(\"down: \" + event.key);\n    }\n  };\n\n  handleKeyUp = event => {\n    switch (event.key) {\n      case \"w\":\n        this.setState({ horizontal: 0 });\n        break;\n      case \"s\":\n        this.setState({ horizontal: 0 });\n        break;\n      case \"a\":\n        this.setState({ vertical: 0 });\n        break;\n      case \"d\":\n        this.setState({ vertical: 0 });\n        break;\n      default:\n        console.log(\"up: \" + event.key);\n    }\n  };\n\n  render() {\n    return (\n      <Layer>\n        <Field />\n        {Object.keys(this.state.players).map(player => {\n          //console.log(this.state.players[player].x);\n          //console.log(this.state.players[player].y);\n          return (\n            <Ball\n              key={player}\n              color={this.state.color}\n              vertical={this.state.players[player].x}\n              horizontal={this.state.players[player].y}\n            />\n          );\n        })}\n        {this.state.bullets.map(bullet => (\n          <Ball\n            key={Math.random()}\n            color={this.state.color}\n            vertical={1}\n            horizontal={1}\n          />\n        ))}\n        {this.keys.map(key => (\n          <KeyHandler\n            keyEventName=\"keydown\"\n            key={key}\n            keyValue={key}\n            onKeyHandle={this.handleKeyDown}\n          />\n        ))}\n        {this.keys.map(key => (\n          <KeyHandler\n            keyEventName=\"keyup\"\n            key={key}\n            keyValue={key}\n            onKeyHandle={this.handleKeyUp}\n          />\n        ))}\n      </Layer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}